---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import ConsentBanner from '../components/ConsentBanner.astro';
import SectionHeading from '../components/ui/SectionHeading.astro';
---

<BaseLayout
  title="Termin vereinbaren – Persönliche Beratung | Energierichter"
  description="Buchen Sie einen kostenlosen Beratungstermin mit unseren Energieexperten – online oder telefonisch."
>
  <Header slot="header" />

  <section class="section-padding">
    <div class="container-narrow">
      <SectionHeading
        title="Termin vereinbaren"
        subtitle="Wählen Sie einen passenden Termin für Ihre persönliche Energieberatung."
      />

      <!-- Calendly Section (consent-gated) -->
      <div class="bg-white rounded-2xl border border-gray-100 shadow-md overflow-hidden">

        <!-- Placeholder (visible until consent) -->
        <div data-consent-placeholder="embeds" class="min-h-[600px] flex items-center justify-center p-8">
          <div class="text-center max-w-md">
            <div class="w-16 h-16 rounded-2xl bg-brand-100 flex items-center justify-center mx-auto mb-6">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#128a50" stroke-width="2" stroke-linecap="round">
                <rect x="3" y="4" width="18" height="18" rx="2"/>
                <path d="M16 2v4M8 2v4M3 10h18M8 14h.01M12 14h.01M16 14h.01M8 18h.01M12 18h.01"/>
              </svg>
            </div>
            <h3 class="text-xl font-heading font-bold text-dark-900 mb-3">Online-Terminbuchung</h3>
            <p class="text-gray-600 mb-4">
              Um den Kalender anzuzeigen, müssen externe Inhalte geladen werden.
              Dabei werden Daten an Calendly übermittelt.
            </p>
            <button data-consent-accept="embeds"
              class="inline-flex items-center gap-2 px-6 py-3 text-sm font-semibold text-white gradient-brand rounded-xl shadow-md hover:shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 mb-4">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M5 13l4 4L19 7"/></svg>
              Externe Inhalte laden
            </button>
            <p class="text-sm text-gray-400 mb-4">
              Alternativ erreichen Sie uns telefonisch:
            </p>
            <a href="tel:+49123456789" class="inline-flex items-center gap-2 px-6 py-3 text-sm font-semibold text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M22 16.92v3a2 2 0 01-2.18 2A19.86 19.86 0 013.09 5.18 2 2 0 015.11 3h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 11.91a16 16 0 006 6l2.27-2.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/></svg>
              +49 123 456789
            </a>
          </div>
        </div>

        <!-- Calendly inline widget (hidden until consent) -->
        <div data-consent-embed="embeds" style="display:none;">
          <div class="calendly-inline-widget" data-url="https://calendly.com/samuelstauss-ado?primary_color=20ab65" style="min-width:320px;height:700px;"></div>
          <script type="text/plain" data-consent="embeds" src="https://assets.calendly.com/assets/external/widget.js" async></script>
        </div>

      </div>
    </div>
  </section>

  <Footer slot="footer" />
  <ConsentBanner slot="consent" />
</BaseLayout>
